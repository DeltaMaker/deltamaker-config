# INSTANIATION FOR STANDARD SIZE DELTAMAKER 2 with standard Wiring (stepper C/Extruder NOT swapped)
# DeltaMaker 2 with skr pico board, classic extruder, print head and probe. 
#
# Date: 2/18/2024
# Filename: printer-910-pico.cfg
#
# Copy to ~/printer.cfg 


##### START AND END GCODE #####
[gcode_macro START_PRINT]
gcode:
   START_PRINT_BASE
   SET_VELOCITY_LIMIT VELOCITY=150 ACCEL=1000 ACCEL_TO_DECEL=500
   DETECT_BED_HEIGHT

[gcode_macro END_PRINT]
gcode:
   END_PRINT_BASE
   M107  # turn off cooling fan
 
##### OPTIONAL PART COOLING FAN #####
[fan]
pin: rpi:gpio16
kick_start_time: 0.1
off_below: 0.2
cycle_time: 0.005
max_power: 0.8
hardware_pwm: False

##### SELECT PRIMARY MCU BOARD #####
[mcu]
#serial: /dev/serial/by-id/usb-Klipper_rp2040_45503571290E1CD8-if00
##canbus_uuid: 3f4e2f47e455
serial: /dev/serial/by-id/usb-Klipper_rp2040_45503571288B3338-if00
#serial: /dev/ttyACM0
#restart_method: command

##### INCLUDE TOOLHEAD AND PROBE TYPE #####
[include /home/pi/deltamaker-config/toolhead-bowden-classic.cfg]
[include /home/pi/deltamaker-config/probe-classic.cfg]
#[include /home/pi/deltamaker-config/probe-calibrate.cfg]

##### INCLUDE BASE PRINTER CONFIGURATION #####
[include /home/pi/deltamaker-config/printer-deltamaker-base.cfg]

##### SPECIFY PRINTER DIMENSIONS #####
[printer]
minimum_z_position: -15
print_radius: 125.0 		# approx 9 inch diameter build area
#delta_radius: 106.8621 		# actual delta radius from CAD
[stepper_a]
#position_endstop: 280 		# approx 10 inch high build volume
#arm_length: 265
[bed_mesh]
mesh_radius: 110 		# usually 110 (+/-)
[delta_calibrate]
radius: 110 			# usually 110

##### SPECIFY NUMBER OF STATUS LEDS #####
[neopixel status_leds]
chain_count: 36

##### INCLUDE BOARD-SPECIFIC PIN DEFINITIONS #####
[include /home/pi/deltamaker-config/motion-system-rev-skr-pico.pins]
[include /home/pi/deltamaker-config/toolhead-skr-pico.pins]

##### INCLUDE DEFAULT MACROS FOR START/END PRINT AND PAUSE/RESUME #####
[include /home/pi/deltamaker-config/deltamaker-default-macros.cfg]

##### CALIBRATION DATA #####
[printer]
max_accel: 2500
square_corner_velocity: 5.0
[input_shaper]
[extruder]
dir_pin: gpio13     #do not reverse direction 
max_extrude_only_velocity: 40
nozzle_diameter: 0.35
control: pid
pid_Kp: 34.298
pid_Ki: 2.287
pid_Kd: 128.617
[probe]
z_offset = 0.75
#[gcode_button my_gcode_button]
#pin: gpio29
#press_gcode:
#   M118 Test

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	-0.293623, -0.293623, -0.293623, -0.293623, -0.293623
#*# 	-0.079362, -0.079362, -0.082483, 0.140008, 0.140008
#*# 	0.190784, 0.017848, 0.000002, 0.133877, 0.596647
#*# 	-0.035377, -0.035377, -0.147622, 0.011394, 0.011394
#*# 	-0.147087, -0.147087, -0.147087, -0.147087, -0.147087
#*# tension = 0.2
#*# min_x = -117.99
#*# algo = lagrange
#*# y_count = 5
#*# mesh_y_pps = 2
#*# min_y = -121.0
#*# x_count = 5
#*# max_y = 99.0
#*# mesh_x_pps = 2
#*# max_x = 102.0
#*#
#*# [printer]
#*# delta_radius = 109.587553
#*#
#*# [stepper_a]
#*# angle = 210.127074
#*# arm_length = 264.767766
#*# position_endstop = 284.202201
#*#
#*# [stepper_b]
#*# angle = 329.437497
#*# arm_length = 264.934238
#*# position_endstop = 282.232709
#*#
#*# [stepper_c]
#*# angle = 90.000000
#*# arm_length = 266.126511
#*# position_endstop = 282.571047
#*#
#*# [endstop_phase stepper_a]
#*# trigger_phase = 61/64
#*#
#*# [endstop_phase stepper_b]
#*# trigger_phase = 15/64
#*#
#*# [endstop_phase stepper_c]
#*# trigger_phase = 16/64
#*#
#*# [delta_calibrate]
#*# height0 = 0.75
#*# height0_pos = 22669.000,22522.000,22541.000
#*# height1 = 0.75
#*# height1_pos = 26811.000,26675.000,20657.000
#*# height2 = 0.75
#*# height2_pos = 22510.000,28691.000,22366.000
#*# height3 = 0.75
#*# height3_pos = 20817.000,25920.000,25966.000
#*# height4 = 0.75
#*# height4_pos = 22244.000,22091.000,26749.000
#*# height5 = 0.75
#*# height5_pos = 25458.500,20739.500,25346.000
#*# height6 = 0.75
#*# height6_pos = 27797.000,22230.000,22228.000
#*# distance0 = 64.9478
#*# distance0_pos1 = 22570.104,22662.192,22690.577
#*# distance0_pos2 = 21079.413,24742.696,24790.025
#*# distance1 = 65.2526
#*# distance1_pos1 = 22650.630,22498.950,22772.728
#*# distance1_pos2 = 22265.816,22106.265,26275.773
#*# distance2 = 64.897
#*# distance2_pos1 = 22813.880,22418.985,22690.577
#*# distance2_pos2 = 24903.613,20928.347,24790.025
#*# distance3 = 64.9732
#*# distance3_pos1 = 22896.625,22501.246,22527.320
#*# distance3_pos2 = 26399.643,22141.042,22150.830
#*# distance4 = 64.9732
#*# distance4_pos1 = 22815.069,22664.507,22446.205
#*# distance4_pos2 = 24924.213,24782.833,20955.495
#*# distance5 = 64.897
#*# distance5_pos1 = 22651.808,22745.498,22527.320
#*# distance5_pos2 = 22283.665,26248.444,22150.830
#*# distance6 = 64.77
#*# distance6_pos1 = 21170.648,24309.918,24626.817
#*# distance6_pos2 = 22378.194,21980.804,26115.964
#*# distance7 = 64.9478
#*# distance7_pos1 = 22363.713,21967.043,25801.102
#*# distance7_pos2 = 24941.663,20959.958,24552.952
#*# distance8 = 65.1002
#*# distance8_pos1 = 24741.823,21021.191,24355.475
#*# distance8_pos2 = 26240.559,22253.567,22024.138
#*# distance9 = 64.8208
#*# distance9_pos1 = 25925.684,22237.351,22009.251
#*# distance9_pos2 = 24687.001,24818.975,20986.045
#*# distance10 = 64.8462
#*# distance10_pos1 = 24488.760,24616.858,21047.280
#*# distance10_pos2 = 22156.342,26087.232,22263.261
#*# distance11 = 65.2526
#*# distance11_pos1 = 22140.874,25772.405,22248.193
#*# distance11_pos2 = 21109.417,24505.903,24827.430
